<div class="content">
  <div class="limit_member_page">
    <div class="member_page">
      <%- include('./navbar.ejs')%>
        <table>
          <thead>
            <tr>
              <th>No.</th>
              <th>Img</th>
              <th>Name</th>
              <th>Email</th>
              <th>Current Tier</th>
              <th>Status</th>
              <th>Join Date</th>
              <th>Last Charge Date</th>
              <th>Next Charge Date</th>
            </tr>
          </thead>
          <tbody>
            <% for (let i=0; i < data.length; i++) { %>
              <tr>
                <td>
                  <%= i + 1 %>
                </td>
                <td><img src="<%= data[i].img %>" alt="user_profile" class="img_member_profile"></td>
                <td>
                  <%= data[i].name %>
                </td>
                <td>
                  <%= data[i].email %>
                </td>
                <td>
                  <%= data[i].currentTier %>
                </td>
                <td class="<%= data[i].status.toLowerCase() %>">
                  <%= data[i].status %>
                </td>
                <td>
                  <%= data[i].joinDate %>
                </td>
                <td>
                  <%= data[i].lastChargeDate %>
                </td>
                <td>
                  <%= data[i].nextChargeDate %>
                </td>
                <td><i id="tooltip_click" class="material-icons">more_horiz</i></td>
              </tr>
              <% } %>
          </tbody>
        </table>
    </div>
  </div>
</div>

<script>

window.onload = async function () {
        fetch('/member/navbar')
            .then(response => response.json())
            .then(memberlist => {
              console.log(memberlist);

                // let html = '';

                // if (memberlist.length > 0) {
                //     for (var count = 0; memberlist.length > count; count++) {
                //         html += '<div class="creator_data">';
                //         html += '<a href="/' + memberlist[count].creator_name + '" class="creator_link">';
                //         html += '<img src=" ' + memberlist[count].img + '">';
                //         html += '<span>' + memberlist[count].creator_name + '</span>';
                //         html += '</a>';
                //         html += '</div>';
                //     }
                // }
                // else {

                //     html += '<div class="creator_data_no">';
                //     html += '<span><i class="fa-solid fa-user-xmark"></i></span>';
                //     html += '<span>ยังไม่ได้สมัครสมาชิก</span>';
                //     html += '<a href="/search">ค้นหาคริเอเตอร์</a>';
                //     html += '</div>';

                // }

                // const memberlist_navbar = $("#memberlist_navbar");
                // memberlist_navbar.empty();
                // memberlist_navbar.append(html);

            })
    }
  
</script>