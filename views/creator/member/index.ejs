<div class="content">
  <div class="limit_member_page">
    <div class="member_page">
      <%- include('./navbar.ejs')%>
        <table>
          <thead>
            <tr>
              <th>No.</th>
              <th>Img</th>
              <th>Name</th>
              <th>Email</th>
              <th>Current Tier</th>
              <th>Join Date</th>
              <th>Last Charge Date</th>
              <th>Next Charge Date</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody id="member_list_data">
          </tbody>
        </table>
    </div>
  </div>
</div>

<script>

  window.onload = async function () {
    fetch('/member/creator')
      .then(response => response.json())
      .then(memberlist => {
        console.log(memberlist);

        let html = '';

        if (memberlist.length > 0) {
          for (var count = 0; memberlist.length > count; count++) {
            html += '<tr>';
            html += '<td>' + (count + 1) + '</td>';
            html += '<td><img src="' + memberlist[count].img + '" alt="user_profile" class="img_member_profile"></td>';
            html += '<td>' + memberlist[count].name + '</td>';
            html += '<td>' + memberlist[count].email + '</td>';
            html += '<td>' + memberlist[count].package_name + '</td>';
            html += '<td>10/09/2566</td>';
            html += '<td>10/09/2566</td>';
            html += '<td>10/09/2566</td>';
            html += '<td>Active</td>';
            html += '<td><i id="tooltip_click" class="material-icons">more_horiz</i></td>';
            html += '</tr>';

          }
        }
        else {

          html += '<tr>';
          html += '<div class="creator_data_no">';
          html += '<span><i class="fa-solid fa-user-xmark"></i></span>';
          html += '<span>ยังไม่ได้สมัครสมาชิก</span>';
          html += '<a href="/search">ค้นหาคริเอเตอร์</a>';
          html += '</div>';
          html += '</tr>';

        }

        const member_list_data = $("#member_list_data");
        member_list_data.empty();
        member_list_data.append(html);

      })
  }

</script>